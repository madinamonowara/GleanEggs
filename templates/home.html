<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Grocery List - GleanEggs</title>
    <link href="https://fonts.googleapis.com/css2?family=Boldonse&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="{{ url_for('static',filename='styles/navbarstyle.css') }}">
    <style>
        body {
            font-family: Arial, sans-serif;
            text-align: center;
            background: #f9f9f9;
            margin: 0;
            padding: 0;
        }

        .top-menu {
            display: flex;
            justify-content: space-between;
            align-items: center;
            background: white;
            padding: 20px 30px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            border: 2px solid #4CAF50;
            border-left: none;
            border-right: none;
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .logo-section {
            display: flex;
            align-items: center;
        }

        .logo {
            width: 60px;
        }

        .logo-text {
            font-family: 'Boldonse', sans-serif;
            font-size: 28px;
            margin-left: 10px;
        }

        .nav-buttons {
            display: flex;
            gap: 15px;
        }

        .nav-buttons button {
            font-size: 16px;
            padding: 10px 15px;
            border: 2px solid #4CAF50;
            background: white;
            border-radius: 10px;
            cursor: pointer;
            transition: background-color 0.3s;
        }

        .nav-buttons button:hover {
            background-color: #e8f5e9;
        }
    </style>
</head>
<body>
    <header>
        <nav class="top-menu">
            <div class="logo-section">
                <img class="logo" src="/static/images/gleaneggs_logo.jpg" alt="GleanEggs Logo">
                <span class="logo-text">GleanEggs</span>
            </div>
            <div class="nav-buttons">
                <button onclick="location.href='recipes.html'">üç≥ Recipes</button>
                <button onclick="location.href='product_list.html'">üìä Products</button>
                <button onclick="location.href='home.html'">üõí Grocery List</button>
                <button onclick="location.href='preferences.html'">üîß Preferences</button>
                <button onclick="location.href='login.html'">üëã Log Out</button>
            </div>
        </nav>
    </header>

    <main style="padding: 20px; max-width: 768px; margin: auto;">
        {% if list %}
        <h2>Hey, {{name}}! Here‚Äôs Your Grocery List</h2>

        <section class="grocery-list" id="groceryList">
            <div class="grocery-item" data-name="Apples" data-quantity="2" id="item-1">
                <input type="checkbox" class="checkbox">
                <img src="https://hips.hearstapps.com/hmg-prod/images/ripe-apple-royalty-free-image-1659454396.jpg?crop=0.924xw:0.679xh;0.0197xw,0.212xh&resize=980:*" alt="Apples" width="50">
                <div class="item-details">
                    <p class="item-name">Apples 2x</p>
                    <p class="item-price">$2.99 at Whole Foods</p>
                </div>
                <button class="remove-item" onclick="removeItem(1)">‚ùå</button>
            </div>

            <div class="grocery-item" data-name="Eggs" data-quantity="1" id="item-2">
                <input type="checkbox" class="checkbox">
                <img src="https://dtgxwmigmg3gc.cloudfront.net/imagery/assets/derivations/icon/256/256/true/eyJpZCI6IjYxOTFkMjY5ZGRlMDExYTQwMTE0NWFjZDdkNmE1YjUzLnBuZyIsInN0b3JhZ2UiOiJwdWJsaWNfc3RvcmUifQ?signature=0bf11805abb214f348c94973995475c345399572376edfad484b9ac777818047" alt="Eggs" width="50">
                <div class="item-details">
                    <p class="item-name">Eggs 1x</p>
                    <p class="item-price">$3.49 at Whole Foods</p>
                </div>
                <button class="remove-item" onclick="removeItem(2)">‚ùå</button>
            </div>
        </section>

        <button onclick="clearList()">Remake List</button>

        <section class="saved-list" id="savedList">
            <h3>Saved for Later:</h3>
        </section>
        {% else %}
        <h2>Hi {{ name }}, let's make a list!</h2>
        <button onclick="saveForLater()">Start New List</button>
        {% endif %}
    </main>

    <script>
        function removeItem(itemId) {
            const item = document.getElementById('item-' + itemId);
            let quantity = parseInt(item.dataset.quantity);
            if (quantity > 1) {
                quantity--;
                item.dataset.quantity = quantity;
                item.querySelector('.item-name').textContent = item.dataset.name + ' ' + quantity + 'x';
            } else {
                item.remove();
            }
        }

        function clearList() {
            const list = document.getElementById('groceryList');
            list.innerHTML = '';
        }

        function saveForLater() {
            const checkboxes = document.querySelectorAll('.grocery-list .checkbox');
            const savedList = document.getElementById('savedList');
            checkboxes.forEach((checkbox) => {
                if (checkbox.checked) {
                    const item = checkbox.closest('.grocery-item');
                    savedList.appendChild(item);
                    checkbox.checked = false;
                }
            });
        }
    </script>
</body>
</html>
